
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="User guide for the Rosalind Franklin Institute's volume electron microscopy software containers">
      
      
        <meta name="author" content="The Rosalind Franklin Institute">
      
      
        <link rel="canonical" href="https://rosalindfranklininstitute.github.io/volume-em-container-documentation/intro/overview/software/napari/">
      
      
        <link rel="prev" href="../../intro/containers/">
      
      
        <link rel="next" href="../fiji/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Napari with Clemreg and Emapanda - Volume EM Containers</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Napari with Clemreg and Emapanda - Volume EM Containers" >
      
        <meta  property="og:description"  content="User guide for the Rosalind Franklin Institute's volume electron microscopy software containers" >
      
        <meta  property="og:image"  content="https://rosalindfranklininstitute.github.io/volume-em-container-documentation/intro/overview/assets/images/social/software/napari.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://rosalindfranklininstitute.github.io/volume-em-container-documentation/intro/overview/software/napari/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Napari with Clemreg and Emapanda - Volume EM Containers" >
      
        <meta  name="twitter:description"  content="User guide for the Rosalind Franklin Institute's volume electron microscopy software containers" >
      
        <meta  name="twitter:image"  content="https://rosalindfranklininstitute.github.io/volume-em-container-documentation/intro/overview/assets/images/social/software/napari.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#napari-with-clemreg-and-empanada" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Volume EM Containers" class="md-header__button md-logo" aria-label="Volume EM Containers" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Volume EM Containers
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Napari with Clemreg and Emapanda
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/rosalindfranklininstitute/volume-em-container-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Volume EM Containers" class="md-nav__button md-logo" aria-label="Volume EM Containers" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    Volume EM Containers
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rosalindfranklininstitute/volume-em-container-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Containers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Napari with Clemreg and Emapanda
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Napari with Clemreg and Emapanda
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-napari" class="md-nav__link">
    <span class="md-ellipsis">
      Starting Napari
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Starting Napari">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apptainer" class="md-nav__link">
    <span class="md-ellipsis">
      Apptainer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-napari" class="md-nav__link">
    <span class="md-ellipsis">
      Using Napari
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-and-support" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting and Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting and Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Known Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-bus-library-incorrectly-set-up-apptainer" class="md-nav__link">
    <span class="md-ellipsis">
      D-Bus library incorrectly set up (Apptainer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unable-to-find-target-for-this-triple" class="md-nav__link">
    <span class="md-ellipsis">
      Unable to find target for this triple
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    <span class="md-ellipsis">
      Getting help
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-and-license-information" class="md-nav__link">
    <span class="md-ellipsis">
      Version and license information
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ“š Useful Links
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fiji/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fiji with MoBIE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../imod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IMOD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mib2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MiB2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-napari" class="md-nav__link">
    <span class="md-ellipsis">
      Starting Napari
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Starting Napari">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apptainer" class="md-nav__link">
    <span class="md-ellipsis">
      Apptainer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-napari" class="md-nav__link">
    <span class="md-ellipsis">
      Using Napari
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-and-support" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting and Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting and Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Known Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-bus-library-incorrectly-set-up-apptainer" class="md-nav__link">
    <span class="md-ellipsis">
      D-Bus library incorrectly set up (Apptainer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unable-to-find-target-for-this-triple" class="md-nav__link">
    <span class="md-ellipsis">
      Unable to find target for this triple
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    <span class="md-ellipsis">
      Getting help
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-and-license-information" class="md-nav__link">
    <span class="md-ellipsis">
      Version and license information
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ“š Useful Links
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="napari-with-clemreg-and-empanada">Napari with Clemreg and Empanada</h1>
<h2 id="introduction">Introduction</h2>
<p>Napari is a fast, interactive viewer for multi-dimensional images.
It is written in Python and designed to handle large, high-dimensional
datasets. 
For researchers working with volume EM data, it is a powerful tool for tasks
including segmentation, registration and visual inspection of 3D images.
Napari's functionality is extendible through community-developed <em>plugins</em>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Napari is a community-driven open-source project; you can find more about 
the community and contributing on the <a href="https://napari.org/stable/community/index.html">napari website</a>.</p>
</div>
<p>The RFI <a href="https://quay.io/repository/rosalindfranklininstitute/napari-clemreg-empanada">napari-clemreg-empanada container</a>
provides a Napari instance with two key plugins for volume EM
workflows:</p>
<ul>
<li>CLEM-Reg (<a href="https://github.com/krentzd/napari-clemreg">napari-clemreg</a>),
  an automated point cloud based registration algorithm</li>
<li>Empanada (<a href="https://github.com/volume-em/empanada-napari">empanada-napari</a>),
  for deep learning-based panoptic segmentation of 2D/3D EM images</li>
</ul>
<h2 id="starting-napari">Starting Napari</h2>
<p><strong>Prerequisites</strong>: 
This guide assumes you have a graphical environment available (e.g., a local X11
server or accessing a VM through RDP).  Napari is primarily a GUI application
and requires display capabilities to run interactively.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While Napari may be run without a GPU, the segmentation in Clemreg and 
Empanada requires a NVIDIA GPU, and the container may crash if you try to
use these plugins without one.</p>
</div>
<h3 id="apptainer">Apptainer</h3>
<p>First, ensure Apptainer is available on your system. The napari-clemreg-empanada container
may then be started by opening a terminal and running a command of the form: 
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>apptainer run --nv \
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  --bind /path/to/data:/data \
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  docker://quay.io/rosalindfranklininstitute/napari-clemreg-empanada:latest
</span></code></pre></div>
Arguments:</p>
<ul>
<li><code>--nv</code> enables NVIDIA GPU support on Windows and Linux. If you don't have a
  NVIDIA card or are on MacOS, you can omit this option, but the plugins may
  not function correctly.</li>
<li><code>--bind /path/to/data:/data</code> is required to access data outside
  the common locations provided by Apptainer by default (<code>/home/$USER</code>). Replace 
  <code>/path/to/data</code> with the actual path to the data directory on your host
machine</li>
</ul>
<h3 id="docker">Docker</h3>
<p>A running X server must be accessible on the host. X11 will be present by
default in most Linux and WSL (Windows Subsystem for Linux) setups, and can
be made accessible to containers by running <code>xhost +local:</code> from the command
line (<code>xhost +</code> if you are using a remote connection). 
MacOS users may use a program such as <a href="https://www.xquartz.org/">XQuartz</a>.
The container may then be started with
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>docker run \
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>  --gpus all \
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  -v /path/to/your/data:/data \
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>  -e DISPLAY=$DISPLAY \
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  -v /tmp/.X11-unix:/tmp/.X11-unix \
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  --device=/dev/dri:/dev/dri \
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>  quay.io/rosalindfranklininstitute/napari-clemreg-empanada:latest
</span></code></pre></div>
Similar to Apptainer's <code>--nv</code>,
 <code>--gpus all</code> may be omitted on a system with a NVIDIA drive, but the
plugins may not function, and <code>/path/to/data</code> should be edited 
to the actual path to your image dataset (unlike
Apptainer, Docker does not mount any directories by default).</p>
<h2 id="using-napari">Using Napari</h2>
<p>If successful, the Napari GUI should open after executing the Apptainer or
Docker <code>run</code> commands:</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the container fails to start, try <a href="#troubleshooting-and-support">Troubleshooting and Support</a>
below.</p>
</div>
<p><img alt="The Napari GUI" src="../images/napari-gui-empty.png" title="The Napari GUI" /></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You must keep the terminal window open after launching Napari. 
To avoid this restriction,
you can add <code>&amp; disown</code> to the end of either <code>apptainer</code> or <code>docker</code>
commands above.</p>
</div>
<p>Image data may be loaded from the file menu (shortcut <code>Ctrl+O</code>) where it
will appear under <em>Layer List</em> on the left-hand side of the interface.
For multi-dimensional images, sliders at the bottom of the viewing pane
allow you to step through additional axes (e.g. third dimension or time).</p>
<p><img alt="The Napari Image Pane" src="../images/napari-image-pane.png" title="The Napari Image Pane" /><!--{: style="width:80%"}-->
<em>The Napari Image Pane with <a href="https://zenodo.org/records/7936982">Sample Data</a>
from the CLEM-Reg Paper<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</em></p>
<p>The CLEM-Reg and Empanada plugins may be accessed via the <em>Plugins</em> menu.
Selecting a function under either plugin will open a new panel to the right-hand
side of the screen, from which registration/segmentation processes can be
configured and started. The screenshot below shows the result of running 
CLEM-Reg registration on the vEM sample dataset of HeLa cells provided with
the original CLEM-Reg study<sup id="fnref2:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<p><img alt="CLEM-Reg Example Registration" src="../images/napari-clemreg.png" title="CLEM-Reg Example Registration" /></p>
<p>For further information on using CLEM-Reg and Empanada, see their respective
GitHub repositories:</p>
<ul>
<li><a href="https://github.com/krentzd/napari-clemreg">napari-clemreg</a></li>
<li><a href="https://github.com/volume-em/empanada-napari">empanada-napari</a></li>
</ul>
<p>Both provide links to free test datasets you can use to confirm the plugins
are working.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Napari is primarily used through its GUI, but also provides a CLI (e.g. for
batch processing) and may be imported and used in Python scripts (N.B. you
must use <code>/opt/Python-3.9.21/python</code> executable within the container). See
<a href="https://napari.org/stable/howtos/headless.html">Running napari headlessly</a></p>
</div>
<h2 id="troubleshooting-and-support">Troubleshooting and Support</h2>
<h3 id="known-issues">Known Issues</h3>
<h4 id="d-bus-library-incorrectly-set-up-apptainer">D-Bus library incorrectly set up (Apptainer)</h4>
<p>Napari may fail to start with the error
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>D-Bus library appears to be incorrectly set up: see the manual page for dbus-uuidgen to correct this issue.
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>(Failed to open &quot;/var/lib/dbus/machine-id&quot;: No such file or directory; UUID file &#39;/etc/machine-id&#39; should contain a hex string of length 32, not length 0, with no other text)
</span></code></pre></div>
A quick solution is to bind your host <code>machine-id</code> to the container:
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>apptainer run --nv \
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  --bind /path/to/data:/data \
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>  --bind /var/lib/dbus/machine-id:/var/lib/dbus/machine-id
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  docker://quay.io/rosalindfranklininstitute/napari-clemreg-empanada:latest
</span></code></pre></div></p>
<h4 id="unable-to-find-target-for-this-triple">Unable to find target for this triple</h4>
<p>If the program crashes when running the plugins with an error
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Program aborted due to an unhandled Error:
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Unable to find target for this triple (no targets are registered)
</span></code></pre></div>
This is likely because the application cannot access your NVIDIA card from
within the container. Make sure you have a NVIDIA Card with updated
driver software and are using <code>--nv</code> or <code>--gpus all</code> in the <code>apptainer</code>/<code>docker</code>
commands. To check whether Apptainer/Docker is correctly presenting your
GPU, you can start an interactive Shell in the containers with 
<code>apptainer shell --nv image-url</code> or <code>docker run -it image-name</code> 
(see <a href="../../intro/containers/#running-containers">Running Containers</a>).</p>
<h3 id="getting-help">Getting help</h3>
<p>If you are still experiencing issues, you can 
<a href="https://github.com/rosalindfranklininstitute/napari-clemreg-empanada/issues/new">create a new issue</a>
on the container GitHub repository. Please share as much information 
as you can regarding your host system (e.g., operating system, container runtime),
the commands you are trying to run as well as any error messages.</p>
<h2 id="version-and-license-information">Version and license information</h2>
<p>Python package dependency conflicts between Napari and its plugins can create
significant installation challenges.  The containerisation aims to address this
issue by providing a stable, version locked instance of Napari the CLEM-Reg,
Empanada plugins. The chosen versions are:</p>
<ul>
<li>napari: 0.4.18</li>
<li>clemreg: 0.2.1</li>
<li>empanada: 1.2</li>
</ul>
<p>The container is distributed under an <a href="https://github.com/rosalindfranklininstitute/napari-clemreg-empanada?tab=Apache-2.0-1-ov-file">Apache 2.0 License</a>.
If you are using this software in your work, considering 
giving attribution to <a href="https://github.com/napari/napari/blob/main/CITATION.cff">Napari</a>
and the CLEM-Reg<sup id="fnref3:1"><a class="footnote-ref" href="#fn:1">1</a></sup>, Empanada<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> publications.</p>
<h2 id="useful-links">ðŸ“š Useful Links</h2>
<ul>
<li><a href="https://napari.org/stable/community/index.html">Napari Website</a></li>
<li><a href="https://empanada.readthedocs.io/en/latest/index.html">Empanada Website</a></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Krentzel, D. et al., <a href="https://www.nature.com/articles/s41592-025-02794-0">Nature Methods 22, 1923â€“1934 (2025)</a>&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref3:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Conrad, Ryan et al. <a href="https://www.cell.com/cell-systems/fulltext/S2405-4712(22)00494-X">Cell Systems, Volume 14, Issue 1, 58 - 71.e5</a>&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../intro/containers/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Why Containers">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Why Containers
              </div>
            </div>
          </a>
        
        
          
          <a href="../fiji/" class="md-footer__link md-footer__link--next" aria-label="Next: Fiji with MoBIE">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Fiji with MoBIE
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      The Rosalind Franklin Institute Â© CC BY-SA 4.0
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/rosalindfranklininstitute" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.instagram.com/rosalindfranklininst/" target="_blank" rel="noopener" title="Instagram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.footer", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>